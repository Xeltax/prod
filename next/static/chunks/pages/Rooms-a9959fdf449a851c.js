(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{5289:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Rooms",function(){return t(1682)}])},1682:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return j}});var n=t(5893),r=t(7294),i=t(8906),a=t(1672),s=t(6940),l=t.n(s),c=t(7064),d=t(7814),u=t(9417),m=t(8353),p=t(3299),h=t(3170),f=t(4780),_=t(1091);function j(){var e;let{data:o}=(0,p.useSession)(),[t,s]=(0,r.useState)([]),{isOpen:j,toggle:x}=(0,_.Z)(),[v,y]=(0,r.useState)(!1),[w,R]=(0,r.useState)(""),[C,E]=(0,r.useState)(""),[N,S]=(0,r.useState)(""),[b,k]=(0,r.useState)(""),[T,Z]=(0,r.useState)(""),[P,g]=(0,r.useState)(0),O={name:w,description:C,points:N,idOwner:null==o?void 0:null===(e=o.user)||void 0===e?void 0:e.user.id,suite:T};return(0,r.useEffect)(()=>{y(!1),(0,i.ZP)().then(e=>s(e))},[v]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)("div",{className:l().roomsContainer,children:[t.length>0&&t.map(e=>{var t;return e.user===(null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.user.id)&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.E.a,{whileHover:{y:-10},className:l().room,href:"/ActiveRooms/"+e.uuid,onClick:()=>{},children:[(0,n.jsx)("h1",{children:e.name}),(0,n.jsx)("p",{children:e.description.length>150?e.description.slice(0,150)+" ...":e.description}),(0,n.jsx)("p",{children:e.points}),(0,n.jsx)(d.G,{icon:u.$aW,color:"red",style:{cursor:"pointer"},onClick:()=>{(0,i.GX)(e),y(!0)}})]})})}),(0,n.jsx)(c.E.div,{whileHover:{rotate:180},className:l().addRoom,onClick:()=>x(),children:(0,n.jsx)(d.G,{icon:u.r8p,className:l().addRoomIcon})})]}),(0,n.jsxs)(h.Z,{isOpen:j,toggle:x,title:"Cr\xe9er une room",children:[(0,n.jsx)(m.Z,{label:"Nom de la room",type:"text",inputData:R,value:w,placeholder:"Nom"}),(0,n.jsx)(m.Z,{label:"Description de la room",type:"text",inputData:E,value:C,placeholder:"Description"}),(0,n.jsx)(m.Z,{label:"Point de la room",type:"text",inputData:S,value:N,placeholder:"Nombre de point"}),(0,n.jsx)(m.Z,{label:"Suite de la room",type:"text",inputData:Z,value:T,placeholder:"id de la Suite"}),(0,n.jsx)(f.Z,{event:()=>{(0,i.dB)(O,null==o?void 0:o.user),x(),y(!0)},children:"Valider"})]})]})})}},8906:function(e,o,t){"use strict";t.d(o,{GX:function(){return a},ZP:function(){return r},dB:function(){return i},el:function(){return s}});var n=t(2410);function r(){return new Promise(e=>{fetch(n.apiUrl+"/room").then(o=>{e(o.json().then(e=>e))})})}async function i(e,o){try{let t=await fetch(n.apiUrl+"/room",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o.access_token},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to add room");return await t.json()}catch(e){console.error(e)}}async function a(e){try{let o=await fetch(n.apiUrl+"/room/"+e.id,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw Error("Failed to delete room");return await o.json()}catch(e){console.error(e)}}async function s(e,o){try{let t=await fetch(n.apiUrl+"/rooms/".concat(e,"/users/").concat(o),{method:"POST",headers:{"Content-Type":"application/json"},body:""});if(!t.ok)throw Error("Failed to enter active rooms");return await t.json()}catch(e){console.error(e)}}},6940:function(e){e.exports={titleRoom:"Rooms_titleRoom__uCTLY",roomsContainer:"Rooms_roomsContainer__GpsP9",room:"Rooms_room__7rdYz",addRoom:"Rooms_addRoom__1LMET",addRoomIcon:"Rooms_addRoomIcon__NbcXa",formContainer:"Rooms_formContainer__y2Yxf"}}},function(e){e.O(0,[976,343,410,774,888,179],function(){return e(e.s=5289)}),_N_E=e.O()}]);